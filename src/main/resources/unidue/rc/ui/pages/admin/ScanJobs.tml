<html t:type="adminlayout" title="${message:scan.jobs.page.title}"
      xmlns:t="http://tapestry.apache.org/schema/tapestry_5_3.xsd">

<div class="row">

    <div class="col-lg-8">
        <t:zone t:id="jobsZone" id="jobsZone" update="none">
            <form t:type="Form" t:id="scanjob_form" t:clientValidation="none">
            <fieldset>
            <table class="table table-hover">
                <thead>
                <tr>
                    <th></th>
                    <th>${message:entry}</th>
                    <th>${message:number-label}</th>
                    <th>${message:libraryLocation-label}</th>
                    <th>${message:reviser}</th>
                    <th>${message:signature}</th>
                    <th>${message:author-label}</th>
                    <th>${message:page.start}</th>
                    <th>${message:page.end}</th>
                    <th>${message:job}</th>
                    <th>${message:scannable.type}</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                    <t:loop source="scanJobs.items" value="scanJobView">
                        <tr style="color: ${prop:statusColor};">
                            <td>
                                <t:checkbox value="action"/>
                            </td>
                            <td>${scanJobView.entryID}</td>
                            <td>${scanJobView.collectionNumber}</td>
                            <td>${scanJobView.location}</td>
                            <td>${scanJobView.reviser}</td>
                            <td>${scanJobView.signature}</td>
                            <td>
                                <ul>
                                <t:loop source="scanJobView.docents" value="docent">
                                    <li>${docent}</li>
                                </t:loop>
                                </ul>
                            </td>
                            <td>${scanJobView.pageStart}</td>
                            <td>${scanJobView.pageEnd}</td>
                            <td>${statusLabel}</td>
                            <td>${scannableTypeLabel}</td>
                            <td>
                                <t:eventlink zone="^" event="editJob" context="scanJobView.jobID">
                                    <span class="glyphicon glyphicon-edit"></span>
                                </t:eventlink>
                            </td>
                        </tr>
                    </t:loop>
                </tbody>
            </table>
            </fieldset>
            </form>
        </t:zone>
    </div>
    <div class="col-lg-4">
        <t:zone t:id="editJobZone" id="editJobZone" update="none" class="row bg-main">
            <t:if test="editingJobView">

            <form t:type="form" class="form-horizontal shadow-left" t:clientValidation="none" t:id="edit_scan_job_form"
                  t:zone="^">
                <h3>${message:job}</h3>
                <fieldset>
                    <input t:type="hidden" value="editingJobID"/>
                    <div class="form-group">
                        <label class="col-md-3 control-label">${message:entry}</label>

                        <div class="col-md-8">
                            <div class="form-control-static">

                                <t:pagelink page="collection/viewcollection"
                                            context="editingJobView.reserveCollectionID"
                                            anchor="${editingJobView.entryID}">${editingJobView.entryID}</t:pagelink>
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="signature" class="col-md-3 control-label">${message:signature}</label>

                        <div class="col-md-8">
                            <input t:type="textfield" t:id="signature" id="signature" value="signature"
                                   class="form-control"/>
                            <t:error for="signature"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="pageStart" class="col-md-3 control-label">${message:page.start}</label>

                        <div class="col-md-8">
                            <input t:type="textfield" t:id="pageStart" id="pageStart" value="pageStart"
                                   class="form-control"/>
                            <t:error for="pageStart"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="pageEnd" class="col-md-3 control-label">${message:page.end}</label>

                        <div class="col-md-8">
                            <input t:type="textfield" t:id="pageEnd" id="pageEnd" value="pageEnd"
                                   class="form-control"/>
                            <t:error for="pageEnd"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="reviser" class="col-md-3 control-label">${message:reviser}</label>

                        <div class="col-md-8">

                            <input t:type="textfield" t:id="reviser" id="reviser" value="reviser"
                                   class="form-control" disabled="true"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="col-md-offset-3 col-md-8">

                            <label for="grab">
                                <input t:type="checkbox" t:id="grab" id="grab" value="grab"/>
                                ${message:grab.edit}
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="jobStatus" class="col-md-3 control-label">${message:status}</label>

                        <div class="col-md-8">

                            <select t:type="Select" t:id="jobStatus" id="jobStatus" t:value="editingJobStatus"
                                    data-placeholder="${message:chosen-placeholder-label}"
                                    t:blankOption="NEVER" class="form-control"/>
                            <t:error for="jobStatus"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="copyrightStatus" class="col-md-3 control-label">${message:copyright-label}</label>

                        <div class="col-md-8">

                            <select t:type="Select" t:id="copyrightStatus" id="copyrightStatus" t:value="copyrightStatus"
                                    data-placeholder="${message:chosen-placeholder-label}"
                                    t:blankOption="NEVER" class="form-control"/>
                            <t:error for="copyrightStatus"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-3 control-label" for="filename">${message:filename}</label>

                        <div class="col-md-8">
                            <div t:type="udetapestry/ajaxupload" t:id="uploads" maxFiles="1"/>
                        </div>
                    </div>
                    <t:if test="editingResource?.fileName">
                        <div class="form-group">
                            <label class="col-md-3 control-label" for="deleteFile">${message:delete-file-label}</label>

                            <div class="col-md-6">
                                <input t:type="checkbox" value="deleteFile" t:id="deleteFile" id="deleteFile"/>
                                <label class="sub" for="deleteFile">${editingResource.fileName}</label>
                            </div>
                        </div>

                    </t:if>
                    <div class="form-group">
                        <label for="url" class="col-md-3 control-label">${message:url}</label>

                        <div class="col-md-8">
                            <input t:type="textfield" t:id="url" id="url" value="url"
                                   class="form-control"/>
                            <t:error for="url"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="newComment" class="col-md-3 control-label">${message:new-comment-label}</label>

                        <div class="col-md-8">
                            <input t:type="textarea" t:id="newComment" id="newComment" value="newComment"
                                   class="form-control"/>
                            <t:error for="newComment"/>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="col-md-offset-3 col-md-9">
                            <input type="submit" value="${message:form-submit-label}"/>
                        </div>
                    </div>
                </fieldset>
            </form>
            <hr/>
            <div class="col-md-11">

                <section id="comments">
                    <h3>${message:comments}</h3>
                    <t:loop source="comments" value="comment">
                        <div class="comment">
                            <div class="meta">
                                <span class="comment-author">${commentAuthor}</span>
                                <span class="comment-date">${commentDate}</span>
                            </div>
                            <p>${comment.comment}</p>
                        </div>
                    </t:loop>
                </section>
            </div>
            </t:if>
        </t:zone>

    </div>
</div>
<a href="#" class="fab hidden-lg"><span class="glyphicon glyphicon-arrow-up"/></a>
</html>